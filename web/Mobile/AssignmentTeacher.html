<!DOCTYPE html> 
<html><head> 
        <title>My Page</title> 
        <meta name="viewport" content="initial-scale=1.0">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="stylesheet" href="http://jsp.chaninz.com/tasm/Mobile/jquery.mobile-1.4.2.css" />
        <link rel="stylesheet" href="http://jsp.chaninz.com/tasm/Mobile/font-awesome.min.css"/>

        <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    </head> 
    <body>
        <div data-role="page" class="jqm-demos ui-responsive-panel" id="panel-fixed-page1" data-title="Panel fixed positioning" data-url="panel-fixed-page1">
            <div data-role="header" data-position="fixed">
                <center>
                    <a href="http://jsp.chaninz.com/tasm/Mobile/index.html" rel="external" and data-ajax="false"><span class="fa fa-home fa-2x" style="alignment-adjust:auto;padding-right:25px;padding-top:15px;padding-bottom:15px"></span></a>
                    <span class="fa fa-globe fa-2x"></span></center>
                <a href="#nav-panel"><i class="fa fa-bars fa-2x"></i></a>
                <div style="padding: 5px;width: auto;background: #E2E2E2;">
                    <input type="search" name="search" placeholder="Filter..."/>
                </div>
            </div><!-- /header -->


            <div id="add-test"></div>


            <div data-role="panel" data-position-fixed="true" data-display="overlay"  id="nav-panel">
                <ul data-role="listview" id="lcList">
                    <li style="background-color:#00F">
                        <img src="" id ="dPIC" width="100" height="100" style="alignment-adjust:top"/>&nbsp;
                        <b style="color:white" id="fName"></b><br/>
                        <b style="color:white" id="lName"></b>
                    </li>
                    <li>
                        <a href="#">Join Course &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            <div class="fa fa-plus fa-2x"></div>
                        </a>
                    </li>
                </ul>
            </div>

            <div data-position="fixed" data-tap-toggle="false" data-role="footer" data-tap-toggle="false" >
                <div data-role="navbar">
                    <ul>
                        <li><a href="http://jsp.chaninz.com/tasm/Mobile/indexTeacher.html" rel="external" and data-ajax="false">Announce</a></li>
                        <li><a href="http://jsp.chaninz.com/tasm/Mobile/AssignmentTeacher.html" rel="external" and data-ajax="false" class="ui-btn-active">Assignment</a></li>
                        <li><a href="TeacherScore.html" rel="external" and data-ajax="false">Score</a></li>
                    </ul>
                </div>
            </div>

        </div>

    </body>
    <script type="text/javascript">
        var id = sessionStorage.getItem('accID');
        $.getJSON('http://jsp.chaninz.com/tasm/showAssignment?id=' + id, function(result) {
            var i = 1;
            $(result).each(function(k, v) {
                $(
                        '<div class="assignment" data-id="' + v.am_id + '" onclick="warp()" style="background-color:#' + (i % 2 == 0 ? 'FFFFFF' : 'F4F4F4') + ';padding:1px;width:auto;">' +
                        '<table><tr><td>' +
                        '<div style="margin-left:15px;color:#999">' +
                        '<h4>' + v.name + '</h4>' +
                        '<p>' + v.course.name + '</p>' +
                        '<b>Due Date: ' + v.due_date + '</b>' +
                        '</div></td><td align="right" style="padding-left:70px"><br/><br/>' +
                        '<h2 style="color:#E74C3C">Late</h2></td>' +
                        '</tr></div>').insertBefore($('#add-test'));

                i += 1;
            });
            $(".assignment").click(function() {
                sessionStorage.setItem('aID', $(this).attr("data-id"));
            });
            var fName = sessionStorage.getItem('fName');
            var lName = sessionStorage.getItem('lName');
            var pic = sessionStorage.getItem('pic');
            var cList = JSON.parse(sessionStorage.getItem('cList'));
            console.dir(cList);
            $("#dPIC").attr("src", "../" + pic);
            $("#fName").text(fName);
            $("#lName").text(lName);
            var key, count = 0;
            for (key in cList) {
                if (cList.hasOwnProperty(key)) {
                    $("#lcList").append('<li class="cLink" data-id="' + key + '"><a class="ui-btn ui-btn-icon-right ui-icon-carat-r">' + cList[key].course.name + '</a></li>').trigger('refresh');
                }
                $(".cLink").click(function() {
                    sessionStorage.setItem('cID', $(this).attr("data-id"));
                    $(location).attr('href', 'http://jsp.chaninz.com/tasm/Mobile/AssignmentInCourse.html');
                });
            }
        });


        function warp() {
            location.href = "http://jsp.chaninz.com/tasm/Mobile/AssignmentDetail.html";
        }

//        function setToServlet(id) {
//            $.ajax({
//                type: "POST",
//                url: "http://jsp.chaninz.com/tasm/showAssignmentDetail",
//                data: {id: id}
//                success:function(id){
//                    alert(id);
//                }
//            });
//        };
    </script>
</html>
